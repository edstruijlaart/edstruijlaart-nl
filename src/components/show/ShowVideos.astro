---
import SectionHeading from '../ui/SectionHeading.astro';

interface Props {
  youtubeVideos?: string[];
}

const { youtubeVideos } = Astro.props;

const defaultVideos = ['https://www.youtube.com/watch?v=GBx2WfYluWE'];

function extractVideoId(url: string): string | null {
  const match = url.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/))([a-zA-Z0-9_-]{11})/);
  return match ? match[1] : null;
}

const videos = (youtubeVideos && youtubeVideos.length > 0 ? youtubeVideos : defaultVideos)
  .map(url => extractVideoId(url))
  .filter(Boolean)
  .slice(0, 2);
---

{videos.length > 0 && (
  <section class="py-16 sm:py-24" style="background-color: var(--bg-surface);">
    <div class="mx-auto max-w-[1200px] px-4 sm:px-6 lg:px-8">
      <SectionHeading title="Bekijk & luister" />
      <div class:list={[
        'mt-8 grid gap-6 max-w-4xl mx-auto',
        videos.length === 2 ? 'grid-cols-1 md:grid-cols-2' : 'grid-cols-1',
      ]}>
        {videos.map(id => (
          <div class="aspect-video rounded-xl overflow-hidden" style="box-shadow: var(--shadow-card);">
            <iframe
              src={`https://www.youtube-nocookie.com/embed/${id}`}
              width="100%"
              height="100%"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
              loading="lazy"
              title="YouTube video"
              class="w-full h-full"
            ></iframe>
          </div>
        ))}
      </div>
    </div>
  </section>
)}
