---
import imageUrlBuilder from '@sanity/image-url';
import { sanityClient } from '../../lib/sanity';

interface Props {
  title: string;
  city: string;
  startDateTime: string;
  hostName?: string;
  heroImage?: any;
}

const { title, city, startDateTime, hostName, heroImage } = Astro.props;

const date = new Date(startDateTime);
const dateStr = date.toLocaleDateString('nl-NL', {
  weekday: 'long',
  day: 'numeric',
  month: 'long',
});
const timeStr = date.toLocaleTimeString('nl-NL', {
  hour: '2-digit',
  minute: '2-digit',
});

const builder = imageUrlBuilder(sanityClient);
const heroUrl = heroImage ? builder.image(heroImage).width(1600).quality(80).auto('format').url() : null;
---

<section class="relative overflow-hidden py-20 sm:py-32" style={heroUrl ? undefined : "background: linear-gradient(135deg, #0F0F0F 0%, #1a1510 50%, #0F0F0F 100%);"}>
  {heroUrl ? (
    <div class="absolute inset-0">
      <img src={heroUrl} alt="" class="w-full h-full object-cover" />
      <div class="absolute inset-0" style="background: linear-gradient(to bottom, rgba(15,15,15,0.3) 0%, rgba(15,15,15,0.6) 50%, rgba(15,15,15,0.95) 100%);"></div>
    </div>
  ) : (
    <div class="absolute inset-0" style="background: radial-gradient(ellipse at 50% 80%, rgba(184,134,11,0.15) 0%, transparent 70%);"></div>
  )}

  <div class="relative mx-auto max-w-[1200px] px-4 sm:px-6 lg:px-8 text-center">
    <p class="text-[#D4A843] font-medium tracking-wide uppercase text-sm mb-4">
      Huiskamerconcert
    </p>
    <h1 class="font-[var(--font-display)] text-4xl sm:text-5xl lg:text-6xl text-[#F0EDE8] mb-6">
      {title}
    </h1>
    <div class="flex flex-wrap items-center justify-center gap-x-6 gap-y-2 text-[#9B9B9B] text-lg">
      <span class="flex items-center gap-2">
        <svg class="w-5 h-5 text-[#D4A843]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 0 1 15 0Z" />
        </svg>
        {city}
      </span>
      <span class="flex items-center gap-2">
        <svg class="w-5 h-5 text-[#D4A843]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" />
        </svg>
        {dateStr}
      </span>
      <span class="flex items-center gap-2">
        <svg class="w-5 h-5 text-[#D4A843]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>
        {timeStr} uur
      </span>
    </div>
    {hostName && (
      <p class="mt-4 text-[#9B9B9B] text-base">
        Bij <span class="text-[#D4A843]">{hostName}</span> thuis
      </p>
    )}
  </div>
</section>
